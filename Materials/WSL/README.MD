# Учебный курс — введение в подсистему Windows для Linux (WSL)

https://learn.microsoft.com/ru-ru/training/modules/wsl-introduction/introduction

# Введение

В этом обучении вы узнаете, как подсистема Windows для Linux (WSL). Начните интегрировать лучшие аспекты Windows и Linux в рабочий процесс разработчика.

![01](/Materials/WSL/Pictures/01_01.png)

## Цели обучения
По завершении этого модуля вы сможете:
+ Опишите среду разработки Windows + Linux, которая включает подсистема Windows для Linux (WSL), а также преимущества по сравнению с традиционной виртуальной машиной или двойной загрузкой.
+ Установите и запустите дистрибутив Linux или несколько дистрибутивов, работающих параллельно.
+ Описание возможностей WSL для использования средств командной строки Windows и Linux и приложений графического интерфейса.
+ Выполните базовые команды WSL, Bash и PowerShell.

# Что такое WSL

Независимо от того, являетесь ли вы опытным разработчиком или студентом только что начинаете изучать код, одним из наиболее важных вариантов, которые необходимо сделать, является тип оборудования, среды и инструментов для инвестиций в использование.

![01](/Materials/WSL/Pictures/01_02.png)

Разработчику потребуется получить доступ к определенным средствам программирования, языкам и платформам. Вы можете установить `Python` и платформу веб-разработки, например `Django`, работать с `JavaScript` на серверной части `Node.js` или устанавливать кроссплатформенный проект, использующий `React`. Как правило, эти языки программирования работают на всех операционных системах. Однако существует множество сценариев, которые могут использовать одну операционную систему по сравнению с другой. Создание собственных классических приложений `Windows` лучше всего использует `Windows`. Создание веб-приложения, которое будет развернуто на пользовательском сервере `Linux` или в рабочей виртуальной машине `Linux`, лучше всего работает с помощью среды `Linux`. Мы называем это четностью между локальной средой разработки и рабочей средой развертывания.

![01](/Materials/WSL/Pictures/01_03.png)

Как сотрудник компании или учащийся в школе, доступ к средствам повышения производительности также является важным для рассмотрения. На протяжении всего дня многие из нас должны использовать средства планирования электронной почты и календаря (например, Outlook), создавать документы Word, электронные таблицы Excel и презентации PowerPoint, а затем переходить к онлайн-звонкам или чату (с помощью средства, например Microsoft Teams).

Вместо использования отдельных компьютеров для обработки этих потребностей некоторые разработчики выбирают двойную загрузку или запуск виртуальных машин. Корпорация Майкрософт теперь предлагает лучшее решение с помощью подсистема Windows для Linux (WSL). С помощью WSL вы можете запускать все любимые средства разработчика и средства повышения производительности в одном месте под управлением Linux и Windows параллельно!

## WSL
WSL позволяет устанавливать и запускать дистрибутивы Linux в Windows. Это может быть немного запутано, так как Linux, например Windows, также является операционной системой (OS)... поэтому вы в основном работаете с двумя операционными системами, интегрированными друг с другом.

## Двойная загрузка и Виртуальные машины
В прошлом запуск Windows и Linux на одном компьютере требует установки обеих операционных систем отдельно и использования диспетчера загрузки для выбора того, какой компьютер будет запускаться во время запуска. С этим возникают некоторые проблемы, такие как необходимость перезагрузить компьютер каждый раз, когда вы хотите переключаться между системами.

Виртуальные машины — это один из способов решения проблемы двойной загрузки двух разных операционных систем. Виртуальные машины позволяют запускать виртуализированный экземпляр Linux на компьютере под управлением Windows. Но виртуальные машины часто обеспечивают более низкую производительность из-за объема ресурсов, необходимых для запуска виртуального экземпляра, а также отсутствия интеграции между двумя операционными системами — вы по-прежнему выполняете изолированные отдельные операционные системы.

WSL устраняет эти проблемы путем интеграции Windows и Linux с гораздо меньшим объемом ресурсов, требуя меньше ресурсов (ЦП, памяти, хранилища) по сравнению с традиционными виртуальными машинами. Запустите любимые приложения Office для Windows, средства разработки, игры и т. д. прямо вместе с вашей средой разработки Linux с невероятно быстрой и эффективной производительностью.

![01](/Materials/WSL/Pictures/01_04.png)

## Принцип работы — архитектура WSL
WSL изначально был запущен в августе 2016 г. (Windows 10 версии 1607), используя архитектуру WSL 1. WSL 1 выполняется как уровень перевода, используя интерфейс ядра Linux на вершине ядра Windows. Вы можете рассматривать WSL 1 как уровень совместимости, который эмулирует системные вызовы для запуска двоичных файлов Linux в среде Windows.

Корпорация Майкрософт объявила WSL 2 в мае 2019 года, введя важные изменения в архитектуре WSL, включая реальное ядро Linux, выполняющееся через подмножество функций Hyper-V. Архитектура WSL 2 значительно улучшила производительность, обеспечивая более быстрые системные вызовы и меньше ограничений. WSL 2 теперь является архитектурой по умолчанию, используемой при установке дистрибутива Linux в Windows.

![01](/Materials/WSL/Pictures/01_05.png)

В текущей архитектуре WSL используется пользовательское ядро Linux. Это пользовательское ядро Linux включает небольшой скрипт инициализации в процессе запуска, который устанавливает подключения между Windows и Linux. Ядро является открытым исходным кодом, и пользователи могут сообщать об ошибках или запрашивать функции.

Архитектура WSL позволяет запускать любой дистрибутив Linux на компьютере с Windows и поддерживает запуск приложений ГРАФИЧЕСКОго интерфейса (а не только средств командной строки), если вы следуйте инструкциям [в документации](https://learn.microsoft.com/ru-ru/windows/wsl/tutorials/gui-apps) по добавлению необходимых драйверов. Архитектура WSL также поддерживает системную систему, систему и диспетчер служб Linux init. Эти последние обновления делают WSL еще более похожим на запуск дистрибутивов Linux на компьютере без операционной системы Windows.

## Когда следует использовать WSL?
WSL — это универсальный инструмент. Он предоставляет отличный способ узнать, как работать с инструментами Linux, попробовать различные дистрибутивы Linux или легко включить средства Linux и Windows в рабочую среду и среду разработки. WSL предназначен для разработки и имеет конкретные проблемы, которые следует учитывать, если вы хотите использовать его для рабочих нагрузок, но отлично подходит для конвейеров CI/CD. WSL также можно использовать в корпоративных параметрах предприятия с возможностью создания и распространения образов WSL на компьютеры, используемые в вашей компании, но с некоторыми конкретными соображениями безопасности, которые следует учитывать. Мы рассмотрим все это в будущих учебных модулях, а дополнительные сведения см. в ссылках документации в конце этого модуля.

# Установка и настройка Linux в Windows с помощью WSL

Подсистема Windows для Linux (WSL) необходимо включить и установить дистрибутив Linux, прежде чем запускать команды Linux и средства доступа, такие как Bash. В этом уроке описано, как включить WSL, установить дистрибутивы Linux и настроить имя пользователя и пароль Linux.

![01](/Materials/WSL/Pictures/01_06.PNG)

## Команда установки WSL
Вы можете установить все, что необходимо для запуска `WSL`, введя `wsl --install` в командной строке администратора `PowerShell` или Windows, а затем перезагрузив компьютер.

Существует несколько вещей, которые необходимо знать о том, что эта команда делает, и параметры, которые он предоставляет.

Для выполнения команды установки WSL необходимо убедиться, что вы работаете под управлением Windows 11 или Windows 10 версии 2004+ (сборка 19041 и выше). При необходимости можно [проверка версию Windows, на котором вы работаете, и обновить ее до новой](ms-settings:windowsupdate). Если вы используете старую сборку Windows и не можете обновить ее, ознакомьтесь с документацией, связанной в конце этого обучения, о том, как вручную включить WSL и установить дистрибутив Linux.

![01](/Materials/WSL/Pictures/01_07.png)

Команда `wsl --install` выполняет следующие действия:
+ Включает необязательный компонент платформы виртуальных машин и устанавливает двоичные файлы ядра WSL.
+ Загружает пакет WSL (включая последнее ядро Linux) из Microsoft Store, что позволяет отправлять обновления и исправления безопасности по мере их доступности.
+ Загружает и устанавливает дистрибутив Ubuntu Linux (если вы не используете один из параметров команды для выбора другого дистрибутива).

Чтобы установить экземпляр Linux с помощью WSL, выполните следующее:
1. Откройте Командную строку PowerShell или Windows в режиме администратора, найдя приложение в меню , щелкнув его правой кнопкой мыши и выбрав "Запуск от имени администратора".
2. Введите команду: `wsl --install`.
3. После установки перезапустите компьютер, чтобы начать использование WSL.

## Установка альтернативных дистрибутивов Linux
Команда `wsl --install` устанавливает дистрибутив `Ubuntu Linux` по умолчанию. Вы можете выбрать другое распространение `Linux` из списка, доступного в Microsoft Store. Вы также можете установить дополнительные дистрибутивы Linux вместе с Ubuntu по умолчанию.

Чтобы узнать, какие дистрибутивы доступны в настоящее время из магазина, введите команду: `wsl --list --online`

![01](/Materials/WSL/Pictures/01_08.png)

Чтобы выбрать альтернативу дистрибутиву Ubuntu по умолчанию или установить дополнительные дистрибутивы из магазина, используйте команду: w`sl --install --distribution <Distribution Name>`

Если дистрибутив Linux, который вы хотите установить, недоступен в Microsoft Store, его можно установить, импортируя файл `.tar` или `.appx` файл. Вы также можете создать собственное настраиваемое распределение. В конце этого обучения можно найти ссылку на документацию по импорту или созданию настраиваемого дистрибутива Linux. Для начинающих мы рекомендуем начать с дистрибутива Ubuntu по умолчанию, что также упрощает выполнение обучения.

![01](/Materials/WSL/Pictures/01_09.PNG)

## Настройка имени пользователя и пароля Linux
После того как вы использовали WSL для установки дистрибутива Linux и перезагрузки компьютера, дистрибутив откроется, и вам будет предложено ввести новое имя пользователя UNIX вместе с паролем.

![01](/Materials/WSL/Pictures/01_10.png)

Здесь есть несколько вещей, которые следует отметить:
+ Имя пользователя и пароль, созданные здесь, будут считаться администратором Linux с возможностью выполнения административных команд sudo (superuser do).
+ Каждая учетная запись пользователя зависит от каждого устанавливаемого дистрибутива Linux и не связана с именем пользователя Windows. При установке нескольких дистрибутивов Linux каждая из них будет иметь собственные учетные записи пользователей и пароли Linux. Вам придется настроить новое имя пользователя и пароль при каждом добавлении дистрибутива, переустановке или сбросе.
+ Имя пользователя и пароль будут принимать практически все как допустимые, но некоторые символы могут вызвать проблемы в различных контекстах. Знаки препинания, такие как подчеркивания, обычно хорошо, но периоды, косые черты или двоеточия, такие как /:. могут вызвать проблемы. Определенно не следует начинать имя пользователя с символа - дефиса или минуса. Мы рекомендуем удалить необычные знаки препинания. Кроме того, следует отметить, что при вводе пароля на экране ничего не появится (это нормальное поведение называется "слепой ввод").
+ Если вам нужно изменить или сбросить пароль или забыть пароль для установленного дистрибутива Linux, ознакомьтесь с документацией WSL, связанной в конце этого модуля.

После ввода имени пользователя и пароля можно подтвердить установленный дистрибутив Linux и номер версии с помощью команды: `cat /etc/os-release`

## Поиск и открытие только что установленного дистрибутива Linux
Вы можете найти дистрибутив Linux, установленный с помощью поиска Windows. Он будет указан в соответствии с именем распространения --Ubuntu (например).

Начиная с октября 2022 года в Windows 11 (версия 22H2), Терминал Windows является узлом командной строки по умолчанию. Поэтому при открытии дистрибутива Linux вы увидите его как вкладку внутри Терминал Windows. Дополнительные сведения о настройке командной строки дистрибутива Linux (Bash), включая поведение запуска по умолчанию, начальный каталог, название вкладки, внешний вид (размер текста, шрифт, цвета и т. д.), посетите Терминал Windows документацию. Найдите ссылку на нее в конце этого обучения.

При установке нового дистрибутива WSL Linux новый экземпляр создается для него внутри Терминал Windows, который можно настроить в соответствии с вашими предпочтениями.

## Обновление и модификация пакетов
Мы рекомендуем часто обновлять пакеты, включенные в каждый установленный дистрибутив Linux. Регулярное обновление гарантирует наличие последних обновлений системы безопасности. Windows не обновляет дистрибутивы Linux автоматически. Это задача большинство пользователей Linux предпочитают контролировать сами. Каждый дистрибутив имеет связанные диспетчеры пакетов для обработки этого. Для Ubuntu или Debian диспетчер пакетов включается в состав расширенного средства пакета (APT).

Чтобы обновить и обновить пакеты для дистрибутива Ubuntu по умолчанию с помощью apt:
1. Откройте Ubuntu (его можно найти в меню поиска Windows после его установки).
2. Введите команду: `sudo apt update && sudo apt upgrade`.
3. Для обновления и обновления пакетов требуются повышенные разрешения, поэтому вам также потребуется ввести пароль, созданный для этой установки Linux.

Команда `update` обновляет список доступных пакетов и их версий, но не устанавливает или не обновляет пакеты. Команда `upgrade` устанавливает более новые версии установленных пакетов. Рекомендуется сначала запустить обновление (или одновременно, как и в объединенной команде выше), чтобы диспетчер пакетов знал о доступных обновлениях для установленного программного обеспечения.

# Обзор рабочего процесса разработки WSL

Возможность использовать как Linux, так и Windows на одном компьютере означает, что вы можете использовать избранные средства из любой операционной системы. В этом разделе мы рекомендуем некоторые средства, служебные программы командной строки, языки программирования и платформы, которые лучше всего поддерживают плавную среду разработки при использовании WSL. Необходимо помнить, что вы работаете между двумя разными файловыми системами. Для достижения оптимальной производительности из вашей среды существует несколько рекомендаций, которые следует учитывать для рабочего процесса.

## Основы рабочего процесса разработки WSL
Для начала рассмотрим некоторые стандартные средства разработки, служебные программы командной строки, языки кода и платформы и методики, участвующие в рабочем процессе разработки WSL.

### Рекомендации по инструментам разработчика
Выбор средств зависит от того, какой тип разработки вы планируете выполнить. Существует несколько рекомендаций для рабочего процесса WSL, особенно если вы только начинаете использовать WSL, в том числе:

+ Редактор кода: Visual Studio Code с расширением WSL<br>
`VS Code` — это бесплатный редактор кода открытый код, иногда называемый интегрированной средой разработки или интегрированной средой разработки. Она поддерживает отладку, выделение синтаксиса, интеллектуальное завершение кода (`IntelliSense`), встроенные команды `Git` и расширяемую платформу расширений, которые позволяют устанавливать дополнительные средства поддержки.<br>
Одной из причин, по которой рекомендуется использовать VS Code, является расширение WSL. Это расширение позволяет пользовательскому интерфейсу VS Code работать в Windows, а команды, расширения, отладка, автозавершение кода, подстрока кода и т. д. все работают на установке WSL Linux. Без этого расширения при работе между файловыми системами Windows и Linux возникают проблемы с производительностью и совместимостью. С помощью расширения можно запускать проекты кода Linux в инкапсулированной среде, изолированной от Windows. Средства, языки, компиляторы и расширения, которые вы запускаете в среде Linux, не изменяют или не нарушают какие-либо компоненты, установленные в вашей среде Windows.

![01](/Materials/WSL/Pictures/01_11.png)

+ Командная строка и служебные программы: Терминал Windows с настроенным Bash + PowerShell<br>
Терминал Windows — это узел командной строки по умолчанию для Windows 11, поэтому все дистрибутивы Linux, устанавливаемые вами, автоматически будут иметь профиль, созданный в Терминал Windows. Этот профиль можно настроить с любым типом текста, шрифтами, цветами и т. д., которые вы предпочитаете. Bash — это интерпретатор командной строки, который поставляется почти со всеми дистрибутивами Linux. Его можно использовать с инструментами служебной программы для таких задач, как поиск файлов и каталогов, отображение сведений о производительности системы, анализ доступного места на диске, мониторинг сетевого интерфейса, а также для автоматизации задач с помощью скриптов. PowerShell служит тем же целям, но для Windows. Одна из важных вещей WSL заключается в том, что вы можете смешивать команды и скрипты PowerShell как Bash, так и скрипты. С помощью Терминал Windows можно одновременно запускать несколько команд Bash и PowerShell параллельно на вкладках или панелях окна.

![01](/Materials/WSL/Pictures/01_12.gif)

+ Языки кода и платформы приложений: установка кода проекта в файловой системе Linux с помощью диспетчера пакетов<br>
В Windows программное обеспечение традиционно установлено с помощью исполняемых файлов (.exe) и с помощью графического интерфейса графического интерфейса Параметры для управления программным обеспечением (Параметры > Приложения и компоненты). В Linux диспетчеры пакетов обрабатывают процесс установки, обновления, настройки и удаления программного обеспечения. При работе с Linux с WSL вы будете использовать диспетчер пакетов для установки языков кода и платформ приложений в каталог файловой системы Linux, связанный с используемым дистрибутивом. Дистрибутив WSL по умолчанию, Ubuntu, использует `apt` диспетчер пакетов (сокращенно для расширенного средства упаковки). Всегда следует установить языки, платформы и инструменты, которые будут использоваться в той же файловой системе, где вы создадите код проекта. Советы для работы между файловыми системами и достижения оптимальной производительности подробно рассматриваются в другом модуле обучения WSL.

![01](/Materials/WSL/Pictures/01_13.png)

### Типичный рабочий процесс разработки
После установки необходимых средств для среды разработки WSL типичный рабочий процесс может выглядеть следующим образом:
1. Откройте Ubuntu (или предпочитаемое дистрибутив Linux) в Терминал Windows по умолчанию.
2. Установите язык кода и платформу с помощью диспетчера пакетов для дистрибутива, введя такие команды, как `sudo apt install <software>`.
3. Кроме того, может потребоваться использовать программу командной строки для скачивания программного обеспечения, если оно недоступно в диспетчере пакетов дистрибутива. cURL (короткий для URL-адреса клиента) — полезная программа, которая поставляется с большинством дистрибутивов Linux. Его можно использовать из командной строки для скачивания программного обеспечения (или любого рода данных) с сервера, использующего синтаксис URL-адреса в локальную файловую систему. Он также часто используется для автоматизированных задач, так как он предназначен для работы без взаимодействия с пользователем.
4. Создайте каталог для хранения проекта приложения в командной строке Ubuntu (`mkdir app-project`). Сохраните файлы проекта, которые будут работать в Linux в файловой системе Linux (а не в файловой системе Windows), чтобы повысить производительность. Введите команду `pwd` , чтобы отобразить путь к каталогу. Если вы используете `Bash` и путь содержит `/mnt/c/`, это означает, что сейчас вы находитесь в файловой системе Windows (подключенный диск C). Введите cd ~ , чтобы изменить каталоги на домашний каталог файловой системы Linux. Если вы используете `PowerShell` и путь содержит` \\wsl.localhost\Ubuntu\home\<username>\app-project`, это указывает на каталог дистрибутива Ubuntu в файловой системе Linux, размещенной `WSL`. (Вы также можете использовать команду: explorer.exe . для просмотра файлов из любой файловой системы в Windows проводник.)

![01](/Materials/WSL/Pictures/01_14.png)

5. Откройте каталог проекта в Visual Studio Code с помощью расширения WSL, введя команду: code . Удаленный сервер VS Code запустится, и код проекта, работающий в Linux, откроется в VS Code, работающем в Windows. Теперь у вас будет доступ к функциям VS Code, таким как завершение кода IntelliSense, отладка и подкладка, на основе средств и компиляторов, установленных в Linux.
6. После внесения обновлений в код вы сможете запустить его в дистрибутиве Linux, но просмотреть его с помощью веб-браузера в Windows с адресом localhost (например, localhost:3000). WSL поддерживает горячую перезагрузку, поэтому вместо того, чтобы перезагрузить все приложение при внесении изменений, можно просто обновить измененные файлы, не теряя состояние приложения.

## Распространенные сценарии использования WSL
Некоторые распространенные ситуации или сценарии, в которых разработчик может использовать WSL:
+ Начинающий, который хочет узнать код в средах Windows и Linux.
+ Профессиональный разработчик, который хочет получить доступ к средствам Linux и Windows.
+ Любая организация, которая хочет выполнить непрерывную интеграцию и рабочий процесс непрерывной доставки (CI/CD), протестируйте обновления на локальном компьютере перед развертыванием обновлений кода в облаке.
+ Любой, кто хочет использовать Docker для создания контейнеров, Git для управления версиями, ускорения GPU для машинного обучения, баз данных (например, MySQL, PostgreSQL, MongoDB, Redis, SQLite), или иметь доступ к приложениям графического интерфейса Linux и Windows одновременно.
+ Компания, которая хочет создать настраиваемые образы WSL для распространения на всех своих компьютерах, чтобы сотрудники имели безопасный доступ к Windows и Linux.

![01](/Materials/WSL/Pictures/01_15.png)

Существуют также некоторые ограничения, которые следует учитывать в WSL, в том числе:
+ WSL предназначен для разработки и включает некоторые функции, которые могут привести к сложному использованию в рабочих сценариях.
+ WSL использует упрощенную служебную виртуальную машину, которая запускает, останавливает и управляет ресурсами автоматически. Если вы пытаетесь использовать его в качестве веб-сервера, виртуальная машина может завершить работу для очистки ресурсов, так как она обнаруживает, что пользователи не активны. Дистрибутив Linux следует использовать без WSL для рабочих сценариев, таких как запуск рабочего веб-сервера.
+ WSL автоматически предоставляет доступ к файлам Windows и путям Windows. Этот доступ добавляется к вашему пути по умолчанию, что может привести к неожиданному поведению для некоторых приложений Linux по сравнению с традиционной средой Linux.

Дополнительные сведения об этих ограничениях рассматриваются в документации WSL.

Чтобы ввести наше введение в WSL, давайте попробуем использовать некоторые основные команды WSL и Linux!

# Выполнение базовых команд WSL

Мы уже рассмотрели несколько основных административных команд WSL, включая `wsl --install` и `wsl --list --online`, а также несколько основных команд Linux, включая несколько базовых команд Linux, включая `mkdir` создание каталога и `sudo apt install <package>` установку программного обеспечения, но давайте рассмотрим несколько других и попробуйте выполнить некоторые распространенные задачи.

## Попробуйте некоторые основные команды WSL
Команды WSL в этом обучении перечислены в формате, поддерживаемом PowerShell или командной строкой Windows (Cmd.exe). Чтобы выполнить эти команды из командной строки Bash в дистрибутиве Linux, необходимо заменить wsl на wsl.exe. Это связано с тем, что WSL управляется из файловой системы Windows в виде исполняемого файла... но исполняемые файлы Windows также можно запускать из Linux, если вы включаете расширение файла.

Откройте командную строку PowerShell и рассмотрим несколько основных задач управления WSL с помощью команд администратора WSL:

1. Проверьте, какая версия WSL установлена, с помощью: `wsl --version` Вы увидите версию, указанную для:
    + WSL
    + Ядро Linux, используемое WSL
    + версия WSLg, которая запускает приложения графического интерфейса Linux
    + версия ДЛЯ MSRDC, представляющая клиент Удаленный рабочий стол (Майкрософт), поддерживающий WSL
    + версии Direct3D и DXCore, используемые для отрисовки графики
    + Версия Windows, на которую вы работаете
2. Используйте команду: `wsl --update` чтобы убедиться, что у нас есть последние обновления WSL.
3. Перечислить дистрибутивы Linux, установленные в настоящее время, введя следующее `wsl --list --verbose`:
4. Проверьте, какие дистрибутивы доступны через Microsoft Store, используйте `wsl --list --online` и попробуйте установить новый дистрибутив, введя следующее: `wsl --install <Distribution Name>` Убедитесь, что дистрибутив, установленный `wsl --list` с помощью команды, снова.
5. Попробуйте изменить дистрибутив Linux по умолчанию из Ubuntu (или то, что вы сначала установили, если не по умолчанию) на дистрибутив, который вы только что установили с помощью команды: `wsl --set-default <Distribution Name>` Вы можете изменить его обратно с помощью той же команды.
6. Откройте командную строку Bash (дистрибутива Linux по умолчанию) в домашнем каталоге файловой системы WSL, введя команду `wsl` ~ из PowerShell. Вы увидите, что останетесь в одном окне командной строки PowerShell, но запрос изменится на Bash, как показано ниже` <user>@<CPU-name>:~$`. Введите команду `pwd` , чтобы убедиться, что путь к каталогу теперь похож `/home/<username>`. Введите команду: `explorer.exe` . чтобы открыть каталог в `Windows` проводник (обязательно включите период, указывающий на открытие текущего пути к каталогу). После открытия можно убедиться, что путь к файлу выглядит примерно так: `\\wsl.localhost\Ubuntu\home\<username>`

![01](/Materials/WSL/Pictures/01_16.png)

7. Выход из командной строки Bash обратно в `PowerShell` с помощью: `exit` Используйте команду `pwd` еще раз, чтобы увидеть путь, на который вы находитесь сейчас, он должен быть примерно таким `C:\Users\<username>\....` Таким образом, можно увидеть, что вы переключились между файловой системой Windows (диск C:\) и файловой системой Linux (`\\wsl.localhost\<distro name>` сетевой диск). Далее давайте попробуем открыть текущий каталог файловой системы Windows в Bash с помощью команды: wsl без ~ (который указывает на открытие Bash в домашнем каталоге Linux). Вы увидите, что путь к каталогу теперь похож `/mnt/c/Users/<username>/... `, так как Bash указывает на путь к файловой системе Windows на подключенном C-диске. Каталог C-диска подключен, так как теперь вы просматриваете его из файловой системы Linux. Дополнительные сведения о работе файловой системы Windows и файловой системы Linux в WSL рассматриваются в отдельном учебном руководстве, связанном в сводке в конце этого модуля.
Для полного списка команд выполните команду `wsl --help`.

## Основные команды Bash и PowerShell
`Bash` — это интерфейс командной строки (CLI) по умолчанию для Linux. Общие сведения о `Bash` связаны в сводке в конце этого модуля. `PowerShell` — это командная строка по умолчанию для Windows (замена предыдущей командной строки Windows). Оба могут размещаться Терминал Windows, которые можно настроить в соответствии с вашими предпочтениями.

Хотя интерфейс командной строки Bash отличается от интерфейса командной строки PowerShell (и более старой командной строки Windows), различия между строками команд минимальны. При использовании WSL большинство команд будут работать одинаково в обоих. Например, исторически команда для перечисления файлов в каталоге была ls в среде Bash/Linux и dir в среде PowerShell/Windows, но с WSL можно использовать либо взаимозаменяемо. Средства служебной программы, доступные для установки и использования, отличаются между Bash и PowerShell, но после установки даже эти средства можно использовать взаимозаменяемо между командной строкой. Как Bash, так и PowerShell полезны для разработки скриптов для автоматизации задач, но Bash предназначен для лучшей работы для автоматизации задач операционной системы Linux, а PowerShell лучше подходит для задач операционной системы Windows.

Давайте рассмотрим несколько базовых команд Bash, которые будут работать как в Bash, так и в PowerShell. Откройте командную строку Ubuntu (или предпочитаемое дистрибутив Linux) и введите следующие команды:
1. `pwd`: рабочий каталог выводит путь к текущему каталогу, выбранному в командной строке.
2. `ls` или `dir`: список содержимого текущего каталога. Некоторые команды включают флаги, которые могут изменить операцию. Например:
    + введите `ls -l` дополнительные сведения о содержимом каталога, например размер, владелец и дата последнего изменения. 
    + Введите `ls -a` , чтобы включить все содержимое каталога, включая все скрытые файлы. Bash будет включать скрытые `.bash_history` и `.bash_logout` `.bashrc` `.profile` файлы, которые могут быть полезны для административных задач и настройки Bash.

3. `cd`: команда каталога изменений должна сопровождаться немного информацией, указывающей, на что нужно изменить каталог. Вы можете указать имя каталога, например `cd project-folder` переместить уровень каталога, используя `cd ..` или перейти к домашнему каталогу. `cd ~`
4. `mkdir`: создайте новый каталог с помощью этой команды и имя нового каталога. Например, `mkdir new-folder`.
5. `cp`: скопируйте файл или каталог. Например, `cp file.txt` или `cp folder-1`. Создание копии с именем того же, что и существующий файл, автоматически заменит этот файл, поэтому рекомендуется использовать `-i` интерактивный флаг, который будет предупреждать вас перед удалением или заменой существующего файла. Например, `cp -i file.txt`.
6. `rm`: удаление файла или каталога. Например, `rm file.txt`. Чтобы удалить каталог в Bash, необходимо добавить `-r` флаг. Например, `rm -r folder-1`. `cp` Как и команда, рекомендуется использовать `-i` флаг для предоставления запросов, подтверждающих, что вы собираетесь удалить или удалить. Флаг `-f` принудительно удаляет, подавляя любые запросы. Как правило, рекомендуется избегать использования флага `-f` , если вы не уверены в том, что вы делаете.
7. clear: очистите экран терминала.

![01](/Materials/WSL/Pictures/01_17.png)

Существует несколько сочетаний клавиш, которые работают как в PowerShell, так и в Bash, например с помощью стрелки вверх, чтобы вспомнить самые последние команды, которые были введены.

Теперь рассмотрим несколько базовых команд Bash, которые не будут работать в PowerShell.
1. `sudo`: команда `superuser do` в `Bash` позволяет временно повысить уровень текущей учетной записи пользователя командной строки, чтобы иметь права корневого пользователя или разрешения администратора. `Sudo` часто требуется для таких задач, как установка нового программного обеспечения, и вам потребуется ввести пароль `Linux`. `Sudo` не имеет эквивалента в `PowerShell`, а вам потребуется открыть отдельный экземпляр командной строки `PowerShell` в режиме Администратор `istrator`, щелкнув правой кнопкой мыши и выбрав команду "Запуск от имени администратора".
2. `touch`: команда сенсорного ввода создает пустой файл. Например, `touch file.txt`. Эквивалент в `PowerShell` или `New-Item file.txt` `ni file.txt`.
3. `cat`: команда сцепления может считывать содержимое файла или нескольких файлов. Например, `cat file.txt file2.txt` показано содержимое файла и файла2. Добавьте флаг, `-n` чтобы включить номера строк. Некоторые команды, например `cat` , ведут себя немного иначе в Bash и PowerShell. В Bash команда `cat > file.txt` создаст новый файл и позволит вводить текст в этом файле, пока вы не запустите и закройте файл. В `PowerShell` `cat` команда не является традиционной формой и не будет работать, `cat > newfile file.txt` однако `cat > file.txt` создаст новый файл.

Мы рассмотрели несколько основных команд, которые можно включить в рабочий процесс, помимо нескольких сходств и различий между строками команд. Часто существует несколько способов выполнения одной и той же команды, а командные строки Bash и PowerShell имеют собственные предпочтительные способы использования команд и сценариев. С помощью WSL можно взаимодействовать с командами Bash и PowerShell, и рекомендуется ознакомиться как с различными способами автоматизации задач.

# Проверка знаний

1. Какой оператор лучше всего описывает WSL 2? 

Средство, позволяющее запускать любой дистрибутив Linux в Windows с помощью упрощенной виртуальной машины вне сцены. WSL использует файловую систему Linux и Windows и позволяет легко переключаться между инструментами Windows и Linux и приложениями графического интерфейса.

WSL использует упрощенную виртуальную машину, но настройка обрабатывается автоматически и требует нескольких ресурсов, поэтому трудно даже заметить, что она выполняется. WSL использует отдельные файловые системы Windows и Linux, но позволяет легко переключаться между ними для запуска предпочитаемых средств командной строки Windows или Linux и приложений графического интерфейса.

2. Какая команда + путь к каталогу позволит переключаться между файловыми системами Windows и Linux? 

```bash
cd /mnt/c/Users
```

```bash
cd \\wsl.localhost\Ubuntu
```
__Все вышеперечисленное.__

Отличная работа! Обе команды и пути верны. Путь mnt можно использовать с косыми чертами для доступа к файловой системе Windows из командной строки Bash и wsl.localhost (или \wsl$) для доступа к файловой системе Linux из PowerShell.

3. Вы можете запустить любой дистрибутив Linux в WSL до тех пор, пока... 

__Распределение упаковано таким образом, чтобы его можно было импортировать.__

Любой дистрибутив Linux можно импортировать с помощью WSL. Вы даже можете создать собственное настраиваемое распределение. Его просто необходимо упаковать в tar-файл со всеми двоичными файлами Linux, чтобы его можно было импортировать (или загрузить на стороне).

# Сводка

В этом модуле вы узнали, как подсистема Windows для Linux (WSL) позволяет устанавливать и запускать дистрибутивы Linux на компьютере с Windows 10 или Windows 11. Вы изучили, как настроить просто интегрированный интерфейс разработки, который не требует двойной загрузки или запуска виртуальной машины для использования любимых средств Windows и Linux.

Вы установили дистрибутив Ubuntu по умолчанию в Linux из Microsoft Store. Вы также узнали, как установить дополнительные дистрибутивы, используя Ubuntu для этого и Kali для этого, все с настраиваемыми командными строками, выполняемыми параллельно в Терминал Windows.

Вы узнали, как перечислить дистрибутивы, доступные в магазине, и импортировать дистрибутивы, которые не хранятся в магазине, или даже создать собственный настраиваемый дистрибутив.

Вы узнали о различных средах, где можно использовать WSL, например Windows Server. Вы узнали, как создать образ пользовательского дистрибутива Linux для запуска в WSL в вашей организации или организации.

Вы попробовали некоторые основные команды, перемешивание команд Bash и PowerShell.

Вы узнали немного о работе между файловой системой Windows и Linux, а также о том, как выглядит стандартная среда разработчика WSL и рабочий процесс.

Хотя мы не пошли в глубину, теперь вы должны быть уверены, что WSL позволит вам использовать как предпочитаемые инструменты командной строки, так и графический пользовательский интерфейс (GUI), независимо от того, работают ли они в Windows или Linux.

Наконец, вы узнали, что есть некоторые большие ресурсы, которые идут на более подробную информацию об этих темах, доступных для удовлетворения ваших потребностей и интересов. Мы связали несколько из них ниже.